
# ๐งฉ ูุณุชูุฏุงุช ูู ููุชูุฑ ูพุงุฒู (Turbo-Engine V4)

ุงู ุณูุฏ ุดุงูู ุฌุฒุฆุงุช ูพุงุฏูโุณุงุฒ ูุณุชู ููุฏุณุ ุฑูุฏุฑูฺฏ ู ุจูููโุณุงุฒโูุง ุณุณุชู ูพุงุฒูโุณุงุฒ ูุฏุฆููุง ฺฉูุชุงู ุงุณุช.

## ฑ. ููุทู ุงุชุตุงู ูุทุนุงุช (True Interlocking Jigsaw)

### ฑ.ฑ. ุดุจฺฉู ุชูุงุฑู ุงุชุตุงูุงุช (Symmetric Connection Grid)
ุจุฑุง ุงูฺฉู ูุทุนุงุช ูพุงุฒู ุจู ุตูุฑุช ูุฒฺฉ ุฏุฑ ูู ููู ุดููุฏุ ุงุฒ ฺฉ ูุงุชุฑุณ ุงุชุตุงูุงุช (`connGrid`) ุงุณุชูุงุฏู ูโุดูุฏ. 
- ูุฑ ูุทุนู ุฏุงุฑุง ฺูุงุฑ ูฺฺฏ ุงุณุช: `top`, `right`, `bottom`, `left`.
- **ูุงููู ุทูุง:** ุงฺฏุฑ ุณูุช ุฑุงุณุช ูุทุนู $(x, y)$ ุฏุงุฑุง ุจุฑุขูุฏฺฏ ($1$) ุจุงุดุฏุ ูุฒููุงู ุณูุช ฺูพ ูุทุนู $(x+1, y)$ ุจุงุฏ ุฏุงุฑุง ูุฑูุฑูุชฺฏ ($-1$) ุจุงุดุฏ.
- **ูุฑููู:** `connGrid[y][x].right = s` ู `connGrid[y][x+1].left = -s`.

### ฑ.ฒ. ููุฏุณู ุฒุจุงููโูุง (Bulbous Tab Geometry)
ุฑุณู ุฒุจุงููโูุง ุจุง ุงุณุชูุงุฏู ุงุฒ ููุญูโูุง ุจุฒุฑ (Bezier Curves) ุงูุฌุงู ูโุดูุฏ ุชุง ุดฺฉู ูพุงุฒ ฺฉูุงุณฺฉ ุงุฌุงุฏ ุดูุฏ:
- **ุงุจุนุงุฏ ุงุณุชุงูุฏุงุฑุฏ:** 
  - `tabSize` (ุนูู ุฒุจุงูู): ฒฒูช ุทูู ุถูุน.
  - `neckWidth` (ุนุฑุถ ฺฏุฑุฏู): ฒฐูช ุทูู ุถูุน.
  - `headWidth` (ุนุฑุถ ุณุฑ ุฒุจุงูู): ณตูช ุทูู ุถูุน.
- **ููุทู ุงูุฌ (Peak):** ุจุง ุงุณุชูุงุฏู ุงุฒ ุจุฑุฏุงุฑ ูุฑูุงู ูุจู ูุญุงุณุจู ูโุดูุฏ ุชุง ุฒุจุงูู ุฏููุงู ุนููุฏ ุจุฑ ุถูุน ุจู ุจุฑูู ุง ุฏุฑูู ูุงู ุดูุฏ.

## ฒ. ุณุณุชูโูุง ฺฉุงุดโฺฉุงุฑ (Tiling Systems)

### ฒ.ฑ. ุดุดโุถูุน ููุชุธู (Hexagonal Tiling)
ุจุฑุง ุญุฐู ูุฑฺฏููู ูุงุตูู (Gap) ุจู ุดุดโุถูุนโูุง:
- **ูุณุจุช ุงุจุนุงุฏ:** ูุณุจุช ุนุฑุถ ุจู ุงุฑุชูุงุน ุจุงุฏ ุฏููุงู $\frac{\sqrt{3}}{2}$ ุจุงุดุฏ.
- **ูุญุงุณุจู ุนุฑุถ:** `pw = virtualW / (cols + 0.5)`.
- **ูุญุงุณุจู ุงุฑุชูุงุน:** `ph = pw / (Math.sqrt(3) / 2)`.
- **ุฌุงุจุฌุง (Offset):** ุฏุฑ ูุฑ ุฑุฏู ูุฑุฏุ ูุฎุชุตุงุช X ุจู ุงูุฏุงุฒู `pw / 2` ุฌุงุจุฌุง ูโุดูุฏ.

### ฒ.ฒ. ูุซูุซ (Triangular Tiling)
- ูุฑ ุณููู ูุฑุจุน ุจู ุฏู ูุทุนู ูุซูุซ ุชูุณู ูโุดูุฏ.
- ุงุฒ ฺฉ ูุชุบุฑ `subIndex` ุจุฑุง ุชุดุฎุต ูุซูุซ ุจุงูุง ุงุฒ ูพุงู ู ุฑุณู ูุชุฑ ุงุณุชูุงุฏู ูโุดูุฏ.

## ณ. ููุชูุฑ ุฑูุฏุฑ ู ุจูููโุณุงุฒ (Rendering Pipeline)

### ณ.ฑ. ฺฉุด ุงูฺฏู ุจุงูุช (Pattern Caching)
ุจู ุฌุง ุฑูุฏุฑ ฺฉุฑุฏู ุจุงูุช (Texture) ุฑู ุชฺฉโุชฺฉ ูุทุนูโูุง ุจุง ุญูููโูุง ุณูฺฏูุ ฺฉ `CanvasPattern` ฺฉโุจุงุฑ ุณุงุฎุชู ุดุฏู ู ุจุง ุงุณุชูุงุฏู ุงุฒ `ctx.createPattern` ุฑู ูุทุนุงุช ุงุนูุงู ูโุดูุฏ. ุงู ฺฉุงุฑ Draw Callูุง ุฑุง ุจู ุดุฏุช ฺฉุงูุด ูโุฏูุฏ.

### ณ.ฒ. ุณุงุฎุช ุชฺฉูโุง (Time-Sliced Initialization)
ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุฑุฒ ุดุฏู ูุฑูุฑฺฏุฑ ุฏุฑ ูุทุนุงุช ุจุงูุง ตฐฐ ุนุฏุฏ:
- ูุฑุขูุฏ ุณุงุฎุช ุฏุฑ ุญูููโูุง ตฐ ุชุง ุชูุณู ุดุฏู ุงุณุช.
- ุจุนุฏ ุงุฒ ูุฑ ตฐ ูุทุนูุ ฺฉ `await new Promise(r => setTimeout(r, 0))` ุงุฌุฑุง ูโุดูุฏ ุชุง ุชุฑุฏ ุงุตู (Main Thread) ุขุฒุงุฏ ุดูุฏ.

### ณ.ณ. ูููููโุจุฑุฏุงุฑ ุชุตูุฑ (Image Sampling)
ุจุฑุง ุงูฺฉู ุฒุจุงููโูุง ูพุงุฒู (ฺฉู ุฎุงุฑุฌ ุงุฒ ูุณุชุทู ุงุตู ูุณุชูุฏ) ุฎุงู ููุงููุฏุ ุชุตูุฑ ุงุตู ุจุง ฺฉ ยซูพุฏูฺฏยป (Padding) ูููููโุจุฑุฏุงุฑ ูโุดูุฏ:
- `padding = pw * 0.35`
- ุฏุฑ ุฒูุงู `drawImage` ุงุฒ ุชุตูุฑ ููุจุนุ ูุฎุชุตุงุช ุจุง ฺฉุณุฑ ุงู ูพุฏูฺฏ ูุญุงุณุจู ูโุดูุฏ ุชุง ุจุงูุช ุชุตูุฑ ุฏุฑ ฺฉู ูุญุท ุฒุจุงูู ูพุฎุด ุดูุฏ.

## ด. ุงูฺฉุชโูุง ู ูุฒฺฉ

### ด.ฑ. ุฐุฑุงุช (Particles)
- ุณุณุชู ุฐุฑุงุช ุฏุงุฑุง ุณูู (Max Particles: 150) ุงุณุช.
- ุฐุฑุงุช ููุท ุฏุฑ ุฒูุงู ุญุฑฺฉุช ูุทุนุงุช ู ุจุง ุงุญุชูุงู ฑตูช ุชููุฏ ูโุดููุฏ ุชุง ุจุงุฑ ูพุฑุฏุงุฒุด ุจู ุญุฏุงูู ุจุฑุณุฏ.

### ด.ฒ. ุงูุชูุงู ุจู ูุฒฺฉ (Matter.js Transition)
- ูพุณ ุงุฒ ุงุชูุงู ุฒูุงู ูพุงุฒูุ ูููุนุช ุชูุงู ูุทุนุงุช ุจู ููุชูุฑ Matter.js ููุชูู ูโุดูุฏ.
- ฺฉ ุงููุฌุงุฑ ุดุนุงุน (Radial Explosion) ุจุง ุงุนูุงู `applyForce` ุงุฒ ูุฑฺฉุฒ ุชุตูุฑ ุจู ูุทุนุงุชุ ูุฑูุฑุฎุชู ููุง ุฑุง ุดุจูโุณุงุฒ ูโฺฉูุฏ.

## ต. ุชูุธูุงุช ุฎุฑูุฌ
- **Aspect Ratio:** ุซุงุจุช ุฑู น:ฑถ (ฑฐธฐxฑนฒฐ).
- **Bleed:** ููุฏุงุฑ `0.5px` ูููพูุดุงู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูพุฏุฏู Aliasing ู ุฎุทูุท ุณูุฏ ุจู ูุทุนุงุช.
