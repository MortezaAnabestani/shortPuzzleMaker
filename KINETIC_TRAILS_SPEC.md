
# ✨ مستندات سیستم حرکت جنبشی حرفه‌ای (Pro Celestial Motion v2)

این سند جزئیات پیاده‌سازی سیستم حرکتی ارتقا یافته را توصیف می‌کند که برای ایجاد حس واقع‌گرایی و وقار در سطح استودیوهای انیمیشن طراحی شده است.

## ۱. فیزیک ارتفاع و عمق (Z-Axis Simulation)
برای خروج از حالت تخت (2D)، هر قطعه در حین حرکت یک چرخه ارتفاع را طی می‌کند:
- **اوج‌گیری (Take-off):** در ۲۵٪ ابتدایی مسیر، مقیاس قطعه تا ۱۵٪ افزایش می‌یابد.
- **تعلیق (Cruising):** در میانه مسیر، سایه قطعه (Drop Shadow) از آن فاصله گرفته و محوتر می‌شود (نشان‌دهنده فاصله گرفتن از سطح زمین).
- **فرود (Landing):** در ۵٪ انتهایی، قطعه به مقیاس ۱.۰ برمی‌گردد و سایه به زیر آن می‌چسبد.

## ۲. تاری حرکتی پویا (Dynamic Motion Blur)
به جای رندر ثابت، قطعه بر اساس سرعت لحظه‌ای ($v$) تغییر شکل می‌دهد:
- **فرمول کشش:** `stretch = 1 + velocity * 0.005`.
- **منطق رندر:** استفاده از `ctx.setTransform` برای اعمال ماتریس کشش در جهت بردار حرکت. این کار باعث می‌شود قطعه در سرعت‌های بالا کشیده و محو به نظر برسد.

## ۳. لرزش و میرایی (Damped Settle)
برای جلوگیری از توقف ناگهانی و مصنوعی:
- از یک تابع **Overshoot** استفاده شده است که قطعه را ۱٪ بیشتر از مقصد می‌برد و سپس با یک لرزش ظریف در نقطه نهایی قفل می‌کند.
- این افکت حس برخورد فیزیکی قطعه با بوم را به خوبی منتقل می‌کند.

## ۴. ذرات ستاره‌ای ارتقا یافته (Noble Sparks)
- **Spark Core:** ذرات دارای یک هسته درخشان سفید و یک هاله رنگی هستند.
- **Gravity Drift:** ذرات پس از رها شدن، تحت تاثیر یک جاذبه بسیار ضعیف به سمت پایین مایل می‌شوند.
- **Global Composite Operation:** استفاده از `screen` و `lighter` برای ترکیب نوری ذرات بر روی هم.
